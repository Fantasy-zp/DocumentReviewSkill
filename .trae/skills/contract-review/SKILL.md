---
name: contract-review
description: 智能合同审核技能。识别合同类型、提取关键信息、扫描风险条款、检查合规性并生成审核报告。支持 PDF、Word、图片（OCR）格式。当用户上传合同文件、要求审核合同、询问条款风险时使用此技能。
---

# 合同智能审核

## 触发条件

当用户执行以下操作时激活此技能：

| 触发方式 | 示例 |
|----------|------|
| 命令触发 | `/contract-review <文件路径>` |
| 文件审核 | "审核一下 xxx.pdf" / "帮我看看这份合同" |
| 风险咨询 | "这个条款有什么风险？" |

## 支持的文件格式

| 格式 | 说明 | 解析方式 |
|------|------|----------|
| `.pdf` | PDF 文档 | pdfplumber 文本提取 |
| `.docx` | Word 2007+ | python-docx 解析 |
| `.txt` / `.md` | 纯文本 | 直接读取 |
| `.jpg` / `.png` | 合同图片 | Qwen-VL OCR 识别 |

> ⚠️ `.doc` (旧版 Word 97-2003) 暂不支持，请转换为 `.docx`

## 审核立场

**默认**：中立审核，指出对甲乙双方各自的风险点。

如用户指定立场（如"我是乙方"），则重点关注对指定方不利的条款。

## 审核流程

### 步骤一：文档解析

识别文件类型并提取文本内容：

```bash
# 文本类文档
python scripts/doc_parser.py <文件路径>

# 图片类文档（OCR）
python scripts/llm_client.py --ocr <图片路径>
```

### 步骤二：识别基本信息

1. **合同类型**：劳动/销售/服务/租赁/借款/技术/合作协议
2. **关键信息**：
   - 合同双方（甲方、乙方）
   - 签订日期、合同期限
   - 合同金额/对价
   - 合同标的

### 步骤三：风险扫描

参考 [references/risk-checklist.md](references/risk-checklist.md) 检查：

#### 🔴 高风险

| 类型 | 特征 |
|------|------|
| 单方免责 | "不承担任何责任"、"放弃索赔" |
| 无限连带责任 | "承担全部连带责任" |
| 违约金过高 | 超过损失的 30% |
| 解除权失衡 | 单方可随时解除 |
| 加速到期过严 | 轻微违约即全额清偿 |

#### 🟡 中风险

| 类型 | 特征 |
|------|------|
| 付款条件苛刻 | 周期过长、多重前提 |
| 验收标准模糊 | "达到满意标准" |
| 管辖地不利 | 约定对方所在地 |

### 步骤四：合规性检查

**必备条款**：
- 明确的合同主体
- 标的物/服务描述
- 价款及支付方式
- 履行期限
- 违约责任
- 争议解决方式

**法律合规**：
- 是否违反强制性法规
- 格式条款是否履行提示义务
- 个人信息处理是否符合《个人信息保护法》

### 步骤五：生成报告

输出结构化审核报告：

```markdown
## 合同审核报告

### 基本信息
| 项目 | 内容 |
|------|------|
| 合同类型 | [类型] |
| 合同双方 | 甲方：xxx / 乙方：xxx |
| 合同金额 | ¥xxx |
| 合同期限 | xxxx.xx.xx - xxxx.xx.xx |

### 风险摘要
| 风险等级 | 数量 |
|----------|------|
| 🔴 高风险 | X 项 |
| 🟡 中风险 | X 项 |
| 🟢 优化建议 | X 项 |

### 风险详情
[风险点、位置、原文、说明、修改建议]

### 审核结论
[✅ 建议签署 / ⚠️ 修改后签署 / ❌ 不建议签署]
```

## 输出规范

- 🔴 高风险：强烈建议修改
- 🟡 中风险：建议关注或协商
- 🟢 优化建议：可接受但建议优化

每个风险点**必须**给出具体修改建议，建议应可直接采纳。

## 外部工具

### 文档解析

```bash
python scripts/doc_parser.py <文件路径>
```

### LLM 辅助

| 场景 | 命令 |
|------|------|
| OCR | `python scripts/llm_client.py --ocr <图片>` |
| 风险分析 | `python scripts/llm_client.py --task risk_analysis <文本>` |

### 推荐模型

| 场景 | 模型 |
|------|------|
| 图片 OCR | qwen-vl-plus |
| 长文本 | qwen-plus |
| 风险推理 | deepseek-chat |

## 注意事项

1. 本技能提供辅助审核意见，**不构成法律建议**
2. 重大合同建议配合专业律师审核
3. 敏感信息（身份证号、银行账号）在输出时应脱敏